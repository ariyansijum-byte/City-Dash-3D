<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>City Dash 3D</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<button id="jumpBtn">JUMP</button>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Light
let light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,10,7);
scene.add(light);

// Ground
let groundGeo = new THREE.PlaneGeometry(10,200);
let groundMat = new THREE.MeshStandardMaterial({color: 0x444444});
let ground = new THREE.Mesh(groundGeo, groundMat);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

// Player
let playerGeo = new THREE.BoxGeometry(1,2,1);
let playerMat = new THREE.MeshStandardMaterial({color: 0x00ff00});
let player = new THREE.Mesh(playerGeo, playerMat);
player.position.y = 1;
scene.add(player);

camera.position.z = 5;
camera.position.y = 3;

let obstacles = [];

function createObstacle() {
  let geo = new THREE.BoxGeometry(1,2,1);
  let mat = new THREE.MeshStandardMaterial({color: 0xff0000});
  let obstacle = new THREE.Mesh(geo, mat);
  obstacle.position.set((Math.floor(Math.random()*3)-1)*2,1,-50);
  scene.add(obstacle);
  obstacles.push(obstacle);
}

setInterval(createObstacle, 1500);

function animate() {
  requestAnimationFrame(animate);

  obstacles.forEach(o=>{
    o.position.z += 0.5;

    // collision
    if(o.position.distanceTo(player.position) < 1.5){
      alert("Game Over!");
      location.reload();
    }
  });

  renderer.render(scene, camera);
}

animate();

// Controls
document.addEventListener("keydown", e=>{
  if(e.key === "ArrowLeft" && player.position.x > -2)
    player.position.x -= 2;
  if(e.key === "ArrowRight" && player.position.x < 2)
    player.position.x += 2;
});
</script>

</body>
</html>
